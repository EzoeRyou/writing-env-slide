<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#参考書を書いてみた">参考書を書いてみた</a></li>
<li><a href="#自己紹介">自己紹介</a></li>
<li><a href="#過去の本">過去の本</a></li>
<li><a href="#最初の本">最初の本</a></li>
<li><a href="#想定していた利点">想定していた利点</a></li>
<li><a href="#現実">現実</a></li>
<li><a href="#巨大ファイル">巨大ファイル</a></li>
<li><a href="#編集者を困らせる">編集者を困らせる</a></li>
<li><a href="#教訓">教訓</a></li>
<li><a href="#監修">監修</a></li>
<li><a href="#そびえ立つクソ">そびえ立つクソ</a></li>
<li><a href="#無駄に冗長">無駄に冗長</a></li>
<li><a href="#難解">難解</a></li>
<li><a href="#テスト">テスト？</a></li>
<li><a href="#経緯">経緯</a></li>
<li><a href="#テストを書け">テストを書け</a></li>
<li><a href="#間違いの数々">間違いの数々</a></li>
<li><a href="#文字は1バイト">1文字は1バイト</a></li>
<li><a href="#教訓-1">教訓</a></li>
<li><a href="#本題">本題</a></li>
<li><a href="#大まかな流れ">大まかな流れ</a></li>
<li><a href="#markdown">markdown</a></li>
<li><a href="#aaron-swartz">Aaron Swartz</a></li>
<li><a href="#テスト-1">テスト</a></li>
<li><a href="#簡潔な日本語のテスト">簡潔な日本語のテスト</a></li>
<li><a href="#サンプルコードのテスト">サンプルコードのテスト</a></li>
<li><a href="#pandoc">pandoc</a></li>
<li><a href="#html">html</a></li>
<li><a href="#tex">tex</a></li>
<li><a href="#編集者の職人作業">編集者の職人作業</a></li>
<li><a href="#ファイル分割">ファイル分割</a></li>
<li><a href="#フォーマット変換">フォーマット変換</a></li>
<li><a href="#ビルドシステム">ビルドシステム</a></li>
<li><a href="#編集">編集</a></li>
<li><a href="#vcs">VCS</a></li>
<li><a href="#section"></a></li>
</ul>
</div>
<h1 id="参考書を書いてみた">参考書を書いてみた</h1>
<h1 id="自己紹介">自己紹介</h1>
<ul>
<li>江添亮</li>
<li>ドワンゴ</li>
<li>C++標準化委員会委員</li>
<li><a href="https://github.com/EzoeRyou" class="uri">https://github.com/EzoeRyou</a></li>
</ul>
<h1 id="過去の本">過去の本</h1>
<p>アスキードワンゴより出版</p>
<ul>
<li>C++11/14コア言語</li>
<li>Bjarne StroustrupのPPPUCの翻訳の監修</li>
</ul>
<h1 id="最初の本">最初の本</h1>
<ul>
<li>単一のXHTMLファイルを手書き</li>
<li>XHTMLの未来をあの頃は信じていた</li>
</ul>
<h1 id="想定していた利点">想定していた利点</h1>
<ul>
<li>XMLとしてバリデートできる</li>
<li>CSSでスタイルを変更できる</li>
<li>JavaScriptでスクリプト処理もできる</li>
</ul>
<h1 id="現実">現実</h1>
<ul>
<li>XHTML手書きは辛い</li>
<li>些細な文法ミスでエラー</li>
<li>意味的に間違っているのにマークアップに問題はないため発見できなかったエラー</li>
<li>そして何より</li>
</ul>
<h1 id="巨大ファイル">巨大ファイル</h1>
<ul>
<li>1MBを超えるファイルサイズ</li>
<li>vimのような優秀なテキストエディターが必要</li>
<li>1MBを超えるとGitHubのWebページ上で編集できない</li>
<li>1MBを超えるとPRがなくなった</li>
</ul>
<h1 id="編集者を困らせる">編集者を困らせる</h1>
<ul>
<li>「これソースないんですか？」</li>
<li>「え、これがソース」</li>
<li>「仕方ないなぁ、sedで加工しました」</li>
</ul>
<h1 id="教訓">教訓</h1>
<p>ソースコードは分割しよう</p>
<h1 id="監修">監修</h1>
<ul>
<li>アスキードワンゴから出版された</li>
<li>C++によるプログラミングの原則と実践</li>
<li>Programming Principles and Practice Using C++</li>
<li>Bjarne Stroustrup著</li>
</ul>
<p>翻訳の監修をした</p>
<h1 id="そびえ立つクソ">そびえ立つクソ</h1>
<h1 id="無駄に冗長">無駄に冗長</h1>
<p>あまりの長さにC++界隈では</p>
<p>「人を殴り殺せる鈍器本」</p>
<p>と呼ばれている</p>
<h1 id="難解">難解</h1>
<ul>
<li>人間が読める文章量は有限である</li>
<li>簡潔に越したことはない</li>
</ul>
<h1 id="テスト">テスト？</h1>
<p>なにそれ美味しいの？</p>
<ul>
<li>サンプルコードの数割がコンパイルエラー</li>
<li>しかも大半はtypo</li>
</ul>
<p>お粗末極まりない。</p>
<h1 id="経緯">経緯</h1>
<ul>
<li>もともとC++11用に2009年ごろに書かれた</li>
<li>C++14対応をするために全面的に手で修正した</li>
<li>サンプルコードに対する自動的なテストが書かれていない</li>
</ul>
<h1 id="テストを書け">テストを書け</h1>
<h1 id="間違いの数々">間違いの数々</h1>
<ul>
<li>C++の正規表現はUnicodeをサポートしている</li>
<li>localeで中国語やマラヤーラム文字をサポートできる</li>
<li>暗黙の型変換の使い過ぎによる間違い</li>
<li>規格の破壊的変更の巻き添え</li>
</ul>
<h1 id="文字は1バイト">1文字は1バイト</h1>
<p>テキストファイルの最初の4バイトは4文字である。</p>
<h1 id="教訓-1">教訓</h1>
<blockquote>
<ul>
<li>文章は簡潔に書け</li>
<li>サンプルコードは自動でテストしろ</li>
<li>C++は完全に理解しろ</li>
</ul>
</blockquote>
<h1 id="本題">本題</h1>
<p>執筆環境</p>
<h1 id="大まかな流れ">大まかな流れ</h1>
<ol style="list-style-type: decimal">
<li>markdownで書く</li>
<li>テスト</li>
<li>pandocでフォーマット変換</li>
<li>tex/html</li>
<li>編集者の職人作業</li>
<li>製本</li>
</ol>
<h1 id="markdown">markdown</h1>
<ul>
<li>Aaron Swartzの遺産</li>
<li>あまり好きじゃない</li>
<li>必要な機能はある。</li>
</ul>
<h1 id="aaron-swartz">Aaron Swartz</h1>
<ul>
<li>(1986-11-08 - 2013-01-11)</li>
<li>markdownを考案</li>
<li>論文を自由にするために尽力した偉人</li>
<li>論文を不自由にしたい極悪人どもによって自殺に追い込まれる</li>
<li>ゲリラ・オープン・アクセス・マニフェストを読め</li>
</ul>
<h1 id="テスト-1">テスト</h1>
<ul>
<li>簡潔な日本語のテスト</li>
<li>サンプルコードのテスト</li>
</ul>
<h1 id="簡潔な日本語のテスト">簡潔な日本語のテスト</h1>
<p>textlint</p>
<ul>
<li>日本語を形態素解析して文法判断</li>
<li>わかりにくい文章を発見できる</li>
<li>擬陽性多し</li>
<li>ないよりマシ</li>
</ul>
<h1 id="サンプルコードのテスト">サンプルコードのテスト</h1>
<p>C++用を自作</p>
<ul>
<li>サンプルコードを抽出</li>
<li>コンパイル</li>
<li>エラーメッセージを表示</li>
</ul>
<h1 id="pandoc">pandoc</h1>
<ul>
<li>多くの入力フォーマットをサポート</li>
<li>多くの出力フォーマットをサポート</li>
<li>このスライドもpandocで出力した</li>
</ul>
<h1 id="html">html</h1>
<ul>
<li>最も自由ソフトウェアによって実装されている</li>
<li>極めて移植性のある組版用フォーマット</li>
</ul>
<h1 id="tex">tex</h1>
<ul>
<li>極めて醜悪で時代遅れの組版システム</li>
<li>残念ながら代替品がない</li>
<li>texかInDesignか好きな方を選べ</li>
</ul>
<h1 id="編集者の職人作業">編集者の職人作業</h1>
<ul>
<li><p>商用本としての体裁を整えるには編集者の手作業が必要</p></li>
<li><p>texだろうがInDesignだろうが変わらない</p></li>
</ul>
<h1 id="ファイル分割">ファイル分割</h1>
<ul>
<li>本のソースコードは分割したい</li>
<li>pandocは入力ファイルを分割できる</li>
</ul>
<h1 id="フォーマット変換">フォーマット変換</h1>
<p>手作業で行うのは面倒</p>
<ol style="list-style-type: decimal">
<li>markdownが1つでも更新されたら</li>
<li>テストを実行</li>
<li>pandocを実行</li>
<li>htmlやtexを生成</li>
</ol>
<p>しかし、どこかで見たような問題</p>
<h1 id="ビルドシステム">ビルドシステム</h1>
<p>プログラマーは解決済み</p>
<ul>
<li>GNU Makeを使用</li>
</ul>
<h1 id="編集">編集</h1>
<p>手作業で行うのは面倒</p>
<ul>
<li>履歴</li>
<li>共同編集</li>
<li>修正差分</li>
<li>[最終稿][修正済み]新しい技術書(3).tar.xz</li>
</ul>
<h1 id="vcs">VCS</h1>
<p>プログラマーは解決済み</p>
<ul>
<li>git使え</li>
</ul>
<h1 id="section"></h1>
</body>
</html>
